# YOLO Детектор Дверей и Окон

Веб-приложение для детекции дверей и окон на изображениях с использованием YOLO модели и FastAPI.

## Возможности

- **Веб-интерфейс**: Современный и интуитивный интерфейс с drag-and-drop загрузкой
- **Детекция объектов**: Использует обученную YOLO модель для детекции дверей и окон
- **Визуализация результатов**: Отображает изображение с bounding boxes и центрами объектов
- **Информация о детекциях**: Показывает класс объекта, координаты центра и уверенность модели

## Структура проекта

```
plan_scanner/
├── app/
│   ├── main.py              # Основное FastAPI приложение
│   ├── model.py             # Класс для работы с YOLO моделью
│   ├── utils.py             # Вспомогательные функции
│   ├── config.py            # Конфигурация приложения
│   ├── templates/
│   │   └── index.html       # HTML шаблон веб-интерфейса
│   └── static/              # Статические файлы
├── layouts                  # Примеры 2д планов
├── door_window_yolo11_detection.pt  # Обученная YOLO модель
├── requirements.txt         # Зависимости Python
├── .env                     # Переменные окружения
└── README.md               # Документация
```

## Установка и запуск

### 1. Клонирование и установка зависимостей

```bash
# Установка зависимостей
pip install -r requirements.txt
```

### 2. Настройка модели

Убедитесь, что файл модели `door_window_yolo11_detection.pt` находится в корневой папке проекта.

### 3. Запуск приложения

#### Вариант 1: Прямой запуск FastAPI
```bash
python main.py
```

#### Вариант 2: С помощью uvicorn
```bash
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

### 4. Доступ к приложению

- **Веб-интерфейс**: http://localhost:8000
- **Документация API**: http://localhost:8000/docs
- **ReDoc документация**: http://localhost:8000/redoc

## Конфигурация

Настройки приложения можно изменить в файле `.env`:

```env
# Настройки приложения
APP_NAME=YOLO Детектор Дверей и Окон
APP_VERSION=1.0.0

# Настройки сервера
HOST=0.0.0.0
PORT=8000

# Настройки файлов
MODEL_PATH=door_window_yolo11_detection.pt

# Настройки детекции
CONFIDENCE_THRESHOLD=0.61
```


### POST /upload
Загрузка и обработка изображения для детекции объектов.

**Параметры:**
- `file`: Файл изображения (форматы: PNG, JPG, JPEG, GIF, BMP, TIFF)

**Ответ:**
```json
{
  "success": true,
  "image": "base64_encoded_image",
  "detections": [
    {
      "class": "door",
      "confidence": 0.95,
      "bbox": {
        "x1": 100,
        "y1": 200,
        "x2": 300,
        "y2": 400
      },
      "center": {
        "x": 200,
        "y": 300
      }
    }
  ],
  "total_objects": 1
}
```

### GET /health
Проверка работоспособности API.

**Ответ:**
```json
{
  "status": "OK",
  "message": "API работает корректно"
}
```

## Использование

1. Откройте веб-интерфейс в браузере
2. Перетащите изображение в область загрузки или нажмите для выбора файла
3. Дождитесь завершения анализа
4. Просмотрите результаты с выделенными объектами и их координатами

## Поддерживаемые форматы

- PNG
- JPG/JPEG
- GIF
- BMP
- TIFF/TIF
- WEBP

## Классы объектов

- `door` - Дверь (отображается зеленым цветом)
- `window` - Окно (отображается синим цветом)
